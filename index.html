<!-- Version 1.9.1 — Fixed Island Toggle + Footer + Icon Alignment -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Tier List</title>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<style>
body{margin:0;padding:0;font-family:Arial,sans-serif;background:#f4f4f4;}
h1{text-align:center;margin:10px;}
.tier-container{display:flex;align-items:center;flex-wrap:wrap;margin:5px 10px;}
.label{
    min-width:120px;
    padding:10px 15px;
    margin-right:5px;
    text-align:center;
    font-weight:bold;
    border-radius:12px;
    color:#fff;
    font-size:16px;
    box-shadow:2px 2px 8px rgba(0,0,0,.3);
    cursor:pointer;
    text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000;
    display:flex;
    align-items:center;
    gap:5px;
}
.color-picker{width:18px;height:18px;border:2px solid #000;border-radius:50%;cursor:pointer;}
.tier{display:flex;flex-wrap:wrap;gap:5px;padding:10px;min-height:80px;border-radius:12px;margin:5px 0;background:#fff;box-shadow:1px 1px 6px rgba(0,0,0,.2);flex:1;cursor:pointer;}
.unranked{display:flex;flex-wrap:wrap;gap:5px;padding:10px;min-height:80px;background:#ddd;border:2px dashed #999;margin:5px 10px 20px;border-radius:12px;}
.img-wrapper{position:relative;width:60px;height:60px;border-radius:6px;overflow:hidden;cursor:pointer;}
.img-wrapper img{width:100%;height:100%;object-fit:cover;transition: transform .15s;}
.img-wrapper:hover img{transform:scale(1.06);}
.img-wrapper.selected{outline:3px solid #00e0ff;outline-offset:2px;}
.delete-btn{position:absolute;top:-6px;right:-6px;background:rgba(255,0,0,.9);color:#fff;border:0;border-radius:50%;width:20px;height:20px;line-height:20px;font-size:14px;cursor:pointer;}
#island{position:fixed;bottom:10px;left:50%;transform:translateX(-50%);background:#888;padding:10px;border-radius:12px;box-shadow:2px 2px 12px rgba(0,0,0,.4);z-index:1000;transition:width 0.3s,max-height 0.3s;overflow:hidden;width:250px;max-height:40px;display:flex;flex-direction:column;}
#island.expanded{max-height:300px;width:400px;}
#islandHeader{
    color:#fff;
    font-weight:bold;
    margin-bottom:5px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
}
.icon-group{display:flex;gap:5px;}
.icon-btn{width:28px;height:28px;border-radius:50%;display:flex;justify-content:center;align-items:center;background:#aaa;color:#fff;cursor:pointer;font-size:20px;transition:transform .15s;}
.icon-btn:hover{transform:scale(1.2);}
#islandContent{display:none;flex-direction:column;margin-top:10px;}
#island.expanded #islandContent{display:flex;}
.island-btn{margin:3px;padding:4px 6px;border:none;border-radius:4px;background:#aaa;color:#fff;cursor:pointer;}
#versionFooter{text-align:center;font-size:12px;color:#aaa;margin:10px 0;}
</style>
</head>
<body>

<h1 id="tierListTitle" contenteditable="true">My Tier List</h1>
<input type="file" id="imageUpload" accept="image/*" multiple>
<div id="tiers"></div>
<h3 style="margin-left:10px;">Unranked</h3>
<div class="unranked" id="unranked"></div>

<div id="island">
  <div id="islandHeader">
    <span id="islandToggle" style="cursor:pointer;">Options</span>
    <div class="icon-group">
      <div id="saveIcon" class="icon-btn material-icons" title="Save">save</div>
      <div id="loadIcon" class="icon-btn material-icons" title="Load">folder_open</div>
      <div id="addCatIcon" class="icon-btn material-icons" title="Add Category">add</div>
      <div id="creditsIcon" class="icon-btn material-icons" title="Credits">info</div>
    </div>
  </div>
  <div id="islandContent">
    <div id="addCategoryPanel" style="display:none;margin-top:5px;">
      <label>Category Name: <input type="text" id="newCategoryName"/></label><br>
      <button id="createCategoryBtn" class="island-btn">Create Category</button>
    </div>
    <div id="creditsPanel" style="display:none;margin-top:5px;color:white;">
      Made by AI — GPT-5 Mini, OpenAI.
    </div>
  </div>
</div>

<input type="file" id="fileInput" accept=".json" style="display:none"/>
<div id="versionFooter">Version 1.9.1 — Version Footer + Icon Alignment + Island Fix</div>

<script>
// ---------- DEFAULT DATA ----------
const defaultData = {
  "title": "My Tier List",
  "tiers": [
    { "score": 20, "name": "S", "color": "#ff0000", "imgs": [] },
    { "score": 17, "name": "A", "color": "#ff5500", "imgs": [] },
    { "score": 15, "name": "B", "color": "#ffff00", "imgs": [] },
    { "score": 12, "name": "C", "color": "#00ff00", "imgs": [] },
    { "score": 8, "name": "D", "color": "#0099ff", "imgs": [] },
    { "score": 0, "name": "E", "color": "#555555", "imgs": [] },
    { "score": -500, "name": "F", "color": "#333333", "imgs": [] }
  ],
  "unranked": []
};

let selectedWrapper=null,imgCount=0;
function createTier(score,name,color){
  let container=document.createElement("div");container.className="tier-container";
  let label=document.createElement("div");label.className="label";label.textContent=name||score;label.style.background=color;
  const colorPick=document.createElement("input");colorPick.type="color";colorPick.value=color;colorPick.className="color-picker";
  colorPick.addEventListener("click",()=>{
    let newName=prompt("Enter category name:", label.textContent);
    if(newName) label.childNodes[0].textContent=newName;
  });
  colorPick.addEventListener("input",()=>{label.style.background=colorPick.value;saveData();});
  label.appendChild(colorPick);
  let tier=document.createElement("div");tier.className="tier";tier.dataset.score=score;
  container.appendChild(label);container.appendChild(tier);document.getElementById("tiers").appendChild(container);
  [label,tier].forEach(el=>{el.addEventListener("click",()=>{if(selectedWrapper){tier.appendChild(selectedWrapper);selectedWrapper.classList.remove("selected");selectedWrapper=null;saveData();}});});
}
function createImageWrapper(src){
  const wrap=document.createElement("div");wrap.className="img-wrapper";wrap.id="img"+(++imgCount);
  const img=document.createElement("img");img.src=src;
  const del=document.createElement("button");del.className="delete-btn";del.textContent="×";
  del.addEventListener("click",e=>{e.stopPropagation();wrap.remove();if(selectedWrapper===wrap)selectedWrapper=null;saveData();});
  wrap.appendChild(img);wrap.appendChild(del);
  wrap.addEventListener("click",()=>{if(wrap.closest(".tier")&&!wrap.closest("#unranked")){document.getElementById("unranked").appendChild(wrap);saveData();}else{selectedWrapper===wrap?selectedWrapper=null:selectWrapper(wrap);}});
  return wrap;
}
function selectWrapper(wrapper){
  if(selectedWrapper)selectedWrapper.classList.remove("selected");
  selectedWrapper=wrapper;
  if(wrapper)wrapper.classList.add("selected");
}
function saveData(){
  let data={title:document.getElementById("tierListTitle").innerText,tiers:[],unranked:[]};
  document.querySelectorAll(".tier-container").forEach(container=>{
    let tier=container.querySelector(".tier"),label=container.querySelector(".label");
    data.tiers.push({score:tier.dataset.score,name:label.childNodes[0].textContent,color:label.style.background,imgs:Array.from(tier.querySelectorAll("img")).map(i=>i.src)});
  });
  data.unranked=Array.from(document.getElementById("unranked").querySelectorAll("img")).map(i=>i.src);
  localStorage.setItem("tierListData",JSON.stringify(data));
}
function loadData(){
  let saved=localStorage.getItem("tierListData");
  let data=saved?JSON.parse(saved):defaultData;
  document.getElementById("tierListTitle").innerText=data.title;
  document.getElementById("tiers").innerHTML="";
  data.tiers.forEach(t=>{createTier(t.score,t.name,t.color);t.imgs.forEach(src=>document.querySelector(`.tier[data-score="${t.score}"]`).appendChild(createImageWrapper(src)));});
  document.getElementById("unranked").innerHTML="";
  data.unranked.forEach(src=>document.getElementById("unranked").appendChild(createImageWrapper(src)));
}
loadData();

// ---------- ISLAND TOGGLE ----------
document.getElementById("islandToggle").addEventListener("click",()=>{
  document.getElementById("island").classList.toggle("expanded");
});
document.getElementById("addCatIcon").addEventListener("click",()=>{
  document.getElementById("addCategoryPanel").style.display="flex";
  document.getElementById("creditsPanel").style.display="none";
  document.getElementById("island").classList.add("expanded");
});
document.getElementById("creditsIcon").addEventListener("click",()=>{
  document.getElementById("creditsPanel").style.display="block";
  document.getElementById("addCategoryPanel").style.display="none";
  document.getElementById("island").classList.add("expanded");
});
document.getElementById("createCategoryBtn").addEventListener("click",()=>{
  const name=document.getElementById("newCategoryName").value||"New Tier";
  createTier(Date.now(),name,"#888888");
  document.getElementById("newCategoryName").value="";
  saveData();
});
document.getElementById("saveIcon").addEventListener("click",()=>{
  saveData();
  let blob=new Blob([localStorage.getItem("tierListData")],{type:"application/json"});
  let a=document.createElement("a");a.href=URL.createObjectURL(blob);a.download="tierlist.json";a.click();
});
document.getElementById("loadIcon").addEventListener("click",()=>document.getElementById("fileInput").click());
document.getElementById("fileInput").addEventListener("change",e=>{
  let file=e.target.files[0];if(!file)return;
  let reader=new FileReader();reader.onload=ev=>{localStorage.setItem("tierListData",ev.target.result);loadData();};reader.readAsText(file);
});
</script>
</body>
</html>
